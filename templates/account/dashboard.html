{% extends 'base.html' %}

{% load i18n %}

{% block head_title %}
    Dashboard
{% endblock %}

{% block body-class %}
    class='dashboard-page'
{% endblock %}

{% block nav %}
    {% include 'nav.html' with none='-none' scrolled='scrolled' %}
{% endblock %}

{% block content %}

    <section class="dashboard-section custom-section section section-on-bg">
        <div class="container">
            {% if message %}
                <div class="col-sm-12">
                    <p class="inner-section-title error-message">{{ message }}</p>
                </div>
            {% endif %}
            {% if available_requests %}
                <div class="row active-requests">
                    <h3 class="inner-section-title">Available Requests</h3>
                    <table id="active_requests_table" class="table table-hover">
                        <tr>
                            <th>Request</th>
                            <th>Request Date</th>
                            <th>Wash Date</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                        {% for request in available_requests %}
                            <tr>
                                <td>
                                    <a href="{% url 'a:payment' %}?id={{ request.id }}">Wash request
                                        #{{ request.id }}</a>
                                </td>
                                <td>{{ request.request_date }}</td>
                                <td>{{ request.wash_date }}</td>
                                <td>{{ request.status }}</td>
                                <td>
                                    <a href="#" type="button" class="btn btn-success no-border-radius">Accept</a>
                                </td>
                            </tr>
                        {% endfor %}
                    </table>
                </div>
            {% endif %}
            {% if active_requests %}
                <div class="row active-requests">
                    <h3 class="inner-section-title">Active Requests</h3>
                    <table id="active_requests_table" class="table table-hover">
                        <tr>
                            <th>Request</th>
                            <th>Request Date</th>
                            <th>Wash Date</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                        {% for request in active_requests %}
                            <tr>
                                <td>
                                    <a href="{% url 'a:payment' %}?id={{ request.id }}">Wash request
                                        #{{ request.id }}</a>
                                </td>
                                <td>{{ request.request_date }}</td>
                                <td>{{ request.wash_date }}</td>
                                <td>{{ request.status }}</td>
                                <td>
                                    {% if request.status == 'pending' and user.role == 'washee' %}
                                        <a href="{% url 'a:payment' %}?id={{ request.id }}" type="button"
                                           class="btn btn-success no-border-radius">Payment</a>
                                    {% endif %}
                                    {#                                    <a href="#" type="button" class="btn btn-danger no-border-radius">Cancel</a>#}
                                </td>
                            </tr>
                        {% endfor %}
                    </table>
                </div>
            {% endif %}
            {% if inactive_requests %}
                <div class="row inactive-requests">
                    <h3 class="inner-section-title">Request History</h3>
                    <table id="inactive_requests_table" class="table table-hover">
                        <tr>
                            <th>Request</th>
                            <th>Request Date</th>
                            <th>Wash Date</th>
                            <th>Status</th>
                        </tr>
                        {% for request in inactive_requests %}
                            <tr>
                                <td>
                                    <a href="{% url 'a:payment' %}?id={{ request.id }}">Wash request
                                        #{{ request.id }}</a>
                                </td>
                                <td>{{ request.request_date }}</td>
                                <td>{{ request.wash_date }}</td>
                                <td>{{ request.status }}</td>
                            </tr>
                        {% endfor %}
                    </table>
                </div>
            {% endif %}
        </div>
    </section>


{% endblock %}